(this["webpackJsonpgdsc-form-release"]=this["webpackJsonpgdsc-form-release"]||[]).push([[0],{213:function(e,t,a){},214:function(e,t,a){},410:function(e,t,a){"use strict";a.r(t);var c=a(3),i=a(82),s=a.n(i),r=(a(213),a(83)),n=(a.p,a(214),a(206)),o=a.n(n),l=a(22),d=a(58),u=a.n(d),h=a(6);function m(e){var t=Object(c.useState)(!1),a=Object(r.a)(t,2),i=a[0],s=a[1],n=function(){l.a.auth().signOut().then((function(){u.a.toast({html:"Logged out. Refresh to continue"}),s(!1)})).catch((function(e){console.log("Error caught while logging out:",e),s(!1)}))},d={signInFlow:"popup",signInOptions:[l.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(e){e.user&&e.user.email&&e.user.email.includes("nmims.edu.in")?l.a.firestore().collection("blacklist").doc("30DaysOfGCP").get().then((function(t){var a=t.data().emails;console.log("peeps",a),console.log("ckec",a.includes(e.user.email)),a&&a.includes(e.user.email)?(u.a.toast({html:"You've already submitted the form using this email id."}),n()):l.a.firestore().collection("blacklist").doc("30DaysOfGCP").update({emails:l.a.firestore.FieldValue.arrayUnion(e.user.email)}).then((function(){s(e)}))})).catch((function(e){u.a.toast({html:"Something went wrong, please try again!"})})):(u.a.toast({html:"You must login with an nmims email domain. Logging out..."}),n())}}};return Object(h.jsx)(h.Fragment,{children:i?e.url?Object(h.jsx)("div",{style:{height:"95vh"},children:Object(h.jsx)("iframe",{src:e.url,width:"80%",height:"100%",style:{margin:"0 auto"},frameborder:"0",marginheight:"0",marginwidth:"0",id:"zeIframe",contextMenu:"return false;"})}):Object(h.jsx)("div",{className:"valign-wrapper",style:{height:"95vh",width:"100vw",justifySelf:"center",alignSelf:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:Object(h.jsx)("div",{className:"preloader-wrapper small active",children:Object(h.jsxs)("div",{className:"spinner-layer spinner-green-only",children:[Object(h.jsx)("div",{className:"circle-clipper left",children:Object(h.jsx)("div",{className:"circle"})}),Object(h.jsx)("div",{className:"gap-patch",children:Object(h.jsx)("div",{className:"circle"})}),Object(h.jsx)("div",{className:"circle-clipper right",children:Object(h.jsx)("div",{className:"circle"})})]})})}):Object(h.jsx)("div",{className:"valign-wrapper",style:{height:"95vh",width:"100vw",justifySelf:"center",alignSelf:"center",display:"flex",flexDirection:"column",justifyContent:"center"},children:Object(h.jsxs)("div",{style:{textAlign:"center"},children:[Object(h.jsx)("h4",{children:"Please login using NMIMS ID"}),Object(h.jsx)(o.a,{uiConfig:d,firebaseAuth:l.a.auth()})]})})})}var f=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),a=t[0],i=t[1];return Object(c.useEffect)((function(){console.log("here"),l.a.firestore().collection("forms").orderBy("createdOn","desc").limit(1).get().then((function(e){e.forEach((function(e){console.log("doc",e.data()),i(e.data().link)}))})).catch((function(e){console.log("erorr",e)})),document.addEventListener("contextmenu",(function(e){e.preventDefault()}))}),[]),Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(m,{url:a})})},j=a(43),g=a(131),b=a(42),p=a(57),O=Object(j.b)({firestore:b.firestoreReducer,firebase:p.firebaseReducer}),v=a(208),x=a(4),I=(a(409),a(132),{apiKey:"AIzaSyAQC4XQouIZ5wQGaa7Fe1sAHp0YdXU4keo",authDomain:"gdsc-form-release.firebaseapp.com",projectId:"gdsc-form-release",storageBucket:"gdsc-form-release.appspot.com",messagingSenderId:"321669275434",appId:"1:321669275434:web:72bd6ac5f4a1cbbc998853",measurementId:"G-1TCKGL8GFP"}),y={apiKey:I.apiKey,authDomain:I.authDomain,databaseURL:I.databaseURL,projectId:I.projectId,storageBucket:I.storageBucket,messagingSenderId:I.messagingSenderId,appId:I.appId,measurementId:I.measurementId};x.a.initializeApp(y);x.a.firestore();var w=x.a,N={userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0},S=Object(j.d)(O,Object(j.c)(Object(j.a)(v.a),Object(b.reduxFirestore)(w)));x.a,S.dispatch,b.createFirestoreInstance;function F(e){var t=e.children,a=Object(g.b)((function(e){return e.firebase.auth}));return Object(p.isLoaded)(a)?t:Object(h.jsx)("div",{className:"progress",children:Object(h.jsx)("div",{className:"indeterminate"})})}s.a.render(Object(h.jsx)(g.a,{store:S,children:Object(h.jsx)(p.ReactReduxFirebaseProvider,{firebase:x.a,config:N,dispatch:S.dispatch,createFirestoreInstance:b.createFirestoreInstance,children:Object(h.jsx)(F,{children:Object(h.jsx)(f,{})})})}),document.getElementById("root"))}},[[410,1,2]]]);
//# sourceMappingURL=main.42990a37.chunk.js.map